[program:%(project_name)s]
directory = %(manage_py_dir)s
user = %(user)s
command = %(virtualenv_dir)s/bin/python %(manage_py_dir)s/manage.py runfcgi host=127.0.0.1 port=8081 daemonize=false pidfile=%(service_dir)s/supervisor/%(project_name)s/pidfile.pid
#command = python ./manage.py runfcgi host=127.0.0.1 port=8080 daemonize=false
#command = python ./manage.py runfcgi daemonize=false \
#    socket=%(service_dir)s/nginx/fastcgi.socket method=prefork \
#    pidfile=%(service_dir)s/supervisor/%(project_name)s/pidfile.pid \
#    maxchildren=10 maxspare=5 minspare=2
stdout_logfile = %(supervisor_log_dir)s/%(project_name)s/runfcgi.out.log
stderr_logfile = %(supervisor_log_dir)s/%(project_name)s/runfcgi.err.log
autostart = true
autorestart = true
environment = DJANGO_SETTINGS_MODULE="%(settings_full_name)s"

[program:%(project_name)s-rabbitmq]
directory = %(project_dir)s
command = %(project_dir)s/scripts/rabbitmq.sh
stdout_logfile = %(supervisor_log_dir)s/%(project_name)s/rabbitmq.out.log
stderr_logfile = %(supervisor_log_dir)s/%(project_name)s/rabbitmq.err.log
autostart = true
autorestart = true
environment = RABBITMQ_NODE_PORT=5673,RABBITMQ_NODENAME="%(project_name)s"

[program:%(project_name)s-celery-worker]
directory = %(project_dir)s
user = %(user)s
command = %(project_dir)s/scripts/celery-worker.sh
stdout_logfile = %(supervisor_log_dir)s/%(project_name)s/celery-worker.out.log
stderr_logfile = %(supervisor_log_dir)s/%(project_name)s/celery-worker.err.log
autostart = true
autorestart = true
environment = DJANGO_SETTINGS_MODULE="%(settings_full_name)s"

[program:%(project_name)s-imagescale2]
directory = %(manage_py_dir)s
user = %(user)s
command = %(virtualenv_dir)s/bin/python %(manage_py_dir)s/manage.py imagescale2
stdout_logfile = %(supervisor_log_dir)s/%(project_name)s/imagescale.out.log
stderr_logfile = %(supervisor_log_dir)s/%(project_name)s/imagescale.err.log
autostart = true
autorestart = true
