{% extends 'base.html' %}

{% block main %}
<div class="container-fluid">
  <div class="row-fluid">
    <h2>Project creator</h2>
  </div>
  <div class="row-fluid">
    {% if wizard_error %}
      <div class="alert alert-error">
        <button class="close" data-dismiss="alert">×</button>
        {{ wizard_error }}
      </div>
    {% endif %}
    {% if wizard_success %}
      <div class="alert alert-success">
        <button class="close" data-dismiss="alert">×</button>
        {{ wizard_success }}
      </div>
    {% endif %}
    {% if wizard_alert %}
      <div class="alert">
        <button class="close" data-dismiss="alert">×</button>
        {{ wizard_alert|safe }}
      </div>
    {% endif %}
    {% include 'main/project/wizard-form-error.html' with form=topic_form %}
    {% include 'main/project/wizard-form-error.html' with form=attributes_form %}
    {% include 'main/project/wizard-form-error.html' with form=additional_form %}
  </div>
  <form method="POST" action="#" class="form form-horizontal">
    {% csrf_token %}
    <div class="row-fluid">
      <h4>Topic</h4>
      <hr>
    </div>
    <div class="row-fluid">
      <div class="span1">&nbsp;</div>
      <div class="span11">
        <fieldset>
          {% include 'form.html' with form=topic_form %}
        </fieldset>
      </div>
    </div>
    <div class="row-fluid">
      <h4>Attributes</h4>
      <hr>
    </div>
    <div class="row-fluid">
      <div class="span1">&nbsp;</div>
      <div class="span11">
        <fieldset>
          {% include 'form.html' with form=attributes_form %}
        </fieldset>
      </div>
    </div>
    <div class="row-fluid">
      <h4>Additional attributes</h4>
      <hr>
    </div>
    <div class="row-fluid">
      <div class="span1">&nbsp;</div>
      <div class="span11">
        <fieldset>
          {% include 'form.html' with form=additional_form %}
        </fieldset>
      </div>
    </div>
    <div class="row-fluid">
      <div class="form-actions">
        <button class="btn" type="submit" name="submit" value="draft">Save as Draft</button>
        <button class="btn btn-success" type="submit" name="submit" value="active">Activate & Create Project</button>
      </div>
    </div>
  <div class="modal hide" id="oDeskModal">
    <div class="modal-body">Marketing stuff</div>
    <div class="modal-footer">
      <a class="btn" data-dismiss="modal" href="#">Close</a>
    </div>
  </div>
  </form>
</div>
{% endblock %}

{% block javascript %}
{{ block.super }}
<script type="text/javascript">
$('#id_data_source').change(function(obj){
        var index = $('#id_data_source').val();
        if (index == 1) {
            $('#id_project_type').parent().parent().css('display', 'none')
            $('#id_no_of_urls').parent().parent().css('display', '')
            $('#id_hourly_rate').parent().parent().css('display', 'none')
            $('#id_budget').parent().parent().css('display', 'none')
        } else {
            $('#id_project_type').parent().parent().css('display', '')
            $('#id_project_type').val(0)
            $('#id_project_type').change()
        }
    }
);
$('#id_project_type').change(function(obj){
        var index = $('#id_project_type').val();
        if (index == 0){
            $('#id_no_of_urls').parent().parent().css('display', '')
            $('#id_hourly_rate').parent().parent().css('display', '')
            $('#id_budget').parent().parent().css('display', 'none')
        } else {
            $('#id_no_of_urls').parent().parent().css('display', 'none')
            $('#id_hourly_rate').parent().parent().css('display', 'none')
            $('#id_budget').parent().parent().css('display', '')
        }
    }
);
$('#id_data_source').change();
setTimeout("$('.alert-error').css('display', 'none');", 30*1000);
</script>
{% endblock %}
